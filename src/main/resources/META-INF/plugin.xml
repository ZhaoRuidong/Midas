<!-- Plugin Configuration File: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin allow-bundled-update="true" use-idea-classloader="true">
    <!-- Unique identifier of the plugin. It should be FQN, cannot be changed between the plugin versions. -->
    <id>org.flymars.devtools.midas</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/best-practices-for-listing.html#plugin-name -->
    <name>Midas - Daily Work Helper</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugin Page. -->
    <vendor url="https://github.com/ZhaoRuidong/Midas">Flymars</vendor>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/best-practices-for-listing.html#plugin-description -->
    <description><![CDATA[
        <p>Generate weekly reports from GitLab commits using AI analysis.</p>
        <ul>
            <li>Integrates with GitLab REST API</li>
            <li>Supports multiple GitLab instances</li>
            <li>Cross-project report generation</li>
            <li>AI-powered intelligent summarization</li>
            <li>Scheduled email delivery</li>
            <li>Customizable report templates</li>
        </ul>
    ]]></description>

    <change-notes><![CDATA[
        <h3>Version 1.0.0</h3>
        <ul>
            <li>GitLab REST API integration for fetching commits</li>
            <li>Support for multiple GitLab instances (self-hosted and GitLab.com)</li>
            <li>Cross-project weekly report generation</li>
            <li>AI-powered analysis (OpenAI, Claude, Zhipu AI)</li>
            <li>Daily notes feature for enhanced reports</li>
            <li>Multi-language report support (Chinese/English)</li>
            <li>SMTP email delivery with scheduling</li>
            <li>IntelliJ Compose UI for modern user experience</li>
        </ul>
    ]]></change-notes>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.compose</depends>
    <depends>com.intellij.java</depends>
    <depends>com.intellij.modules.json</depends>
    <depends>org.intellij.plugins.markdown</depends>

    <!-- Extension Points -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- Application-level service (explicitly registered for dynamic plugin support) -->
        <applicationService serviceImplementation="org.flymars.devtools.midas.config.ConfigManager"
                            serviceInterface="org.flymars.devtools.midas.config.ConfigManager"/>

        <!-- Project-level services (explicitly registered for dynamic plugin support) -->
        <projectService serviceImplementation="org.flymars.devtools.midas.gitlab.GitLabInstanceService"
                        serviceInterface="org.flymars.devtools.midas.gitlab.GitLabInstanceService"/>
        <projectService serviceImplementation="org.flymars.devtools.midas.gitlab.GitLabProjectService"
                        serviceInterface="org.flymars.devtools.midas.gitlab.GitLabProjectService"/>
        <projectService serviceImplementation="org.flymars.devtools.midas.gitlab.GitLabCommitService"
                        serviceInterface="org.flymars.devtools.midas.gitlab.GitLabCommitService"/>
        <projectService serviceImplementation="org.flymars.devtools.midas.analysis.AIAnalyzerService"
                        serviceInterface="org.flymars.devtools.midas.analysis.AIAnalyzerService"/>
        <projectService serviceImplementation="org.flymars.devtools.midas.email.EmailService"
                        serviceInterface="org.flymars.devtools.midas.email.EmailService"/>

        <!-- Notification Group -->
        <notificationGroup id="Midas"
                           displayType="BALLOON"
                           key="notification.group.name"/>

        <!-- Project Settings -->
        <projectConfigurable parentId="tools"
                                instance="org.flymars.devtools.midas.ui.settings.PluginSettingsConfigurable"
                                id="org.flymars.devtools.midas.settings"
                                displayName="Midas"/>

        <!-- Tool Window -->
        <toolWindow id="Midas"
                   factoryClass="org.flymars.devtools.midas.ui.toolwindow.ReportToolWindowFactory"
                   anchor="right"
                   icon="/META-INF/icon.svg"/>

        <!-- Post startup activity for initialization -->
        <postStartupActivity implementation="org.flymars.devtools.midas.MidasStartupActivity"/>
    </extensions>

    <!-- Actions -->
    <actions>
        <action id="Midas.Refresh"
                class="org.flymars.devtools.midas.ui.actions.RefreshAction"
                text="Refresh Commit Data"
                description="Refresh Git commit data"
                icon="/META-INF/refresh.svg"/>
        <action id="Midas.GenerateReport"
                class="org.flymars.devtools.midas.ui.actions.GenerateReportAction"
                text="Generate Weekly Report"
                description="Generate and preview weekly report"
                icon="/META-INF/report.svg"/>
        <action id="Midas.SendEmail"
                class="org.flymars.devtools.midas.ui.actions.SendEmailAction"
                text="Send Report via Email"
                description="Send weekly report via email"
                icon="/META-INF/email.svg"/>
    </actions>
</idea-plugin>
